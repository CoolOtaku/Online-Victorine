<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Онлайн - вікторини</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.css">

    <!-- Іконки -->
    <link rel="apple-touch-icon" href="assets/img/logo.jpg" sizes="180x180">
    <link rel="icon" href="assets/img/logo.jpg" sizes="32x32" type="image/png">
    <link rel="icon" href="assets/img/logo.jpg" sizes="16x16" type="image/png">
    <link rel="mask-icon" href="assets/img/logo.jpg" color="#7952b3">
    <link rel="icon" href="assets/img/logo.jpg">

    <!-- Шрифти -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">

    <!-- Стилі -->
    <link rel="stylesheet" type="text/css" href="assets/css/main.css">
    <link rel="stylesheet" type="text/css" href="assets/css/media.css">

</head>
<body>
<div class="container">
  <header class="blog-header py-3">
    <div class="row flex-nowrap align-items-center">
      <div class="col-2">
        <img id="logo" src="assets/img/logo.jpg" class="bi me-2" width="100" height="100">
      </div>
      <div class="col-8 text-center align-items-center">
        <h1 class="display-7 fst-italic">Онлайн - вікторини</h1>
      </div>
      <div class="col-2 d-flex justify-content-end align-items-center">
        <a class="link-secondary" href="#" aria-label="Шукати" data-bs-toggle="modal" data-bs-target="#exampleModal">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="mx-3" role="img" viewBox="0 0 24 24"><title>Search</title><circle cx="10.5" cy="10.5" r="7.5"></circle><path d="M21 21l-5.2-5.2"></path></svg>
        </a>
      </div>
    </div>
  </header>

<main class="container">
  <div class="p-4 p-md-5 mb-4 text-black rounded-3 bg-color2">
    <div class="col-md-6 px-0">
      <h1 class="display-10 fst-italic">Сайт Онлайн - вікторини</h1>
      <p class="lead my-3">На даному сайті можна проходити вікторини на різні теми, всі доступні теми відображені в меню вгорі.</p>
      <p class="lead mb-0"><a href="https://vpu21.if.ua" class="text-blue fw-bold">Сайт створено як куртосий проект для ВПУ№21</a></p>
    </div>
  </div>

  <h3 class="pb-4 mb-4 fst-italic border-bottom">
    Вікторини:
  </h3>

  <div id="tests">
    <!-- Дані заповняються через JS -->
  </div>

</main>

<footer class="blog-footer">
  <p>Даний сайт розробила Кнігніцька Іванна <a href="https://www.instagram.com/ivanka_knignitska_/">Мій Instagram</a>.</p>
  <p>
    <a href="#">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-arrow-up-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"/>
        </svg>
    </a>
  </p>
</footer>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Пошук вікторин на сайті</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <input type="text" class="form-control" id="search-text" placeholder="Введіть текс для пошуку">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="Search()">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
          </svg>
          Шукати</button>
      </div>
      <div class="alert alert-dark" id="search-content"></div>
    </div>
  </div>
</div>

<!-- JS -->
<script src="assets/js/jquery.min.js" type="text/javascript"></script>
<script src="assets/js/bootstrap.js" type="text/javascript"></script>
<script src="assets/js/main.js" type="text/javascript"></script>
<script type="text/javascript">
Start();
function Start(){
  $.getJSON("data/json/themes.json", function(data) {
    $.each(data.themes, function(index, value) {
      $("#tests").append("<div class=\"text-center alert alert-dark\" aria-label=\""+value+"\"><div class=\"container-fluid justify-content-center\"><div class=\"bg-color2 rounded-3\"><button class=\"btn collapsed w-100\" data-bs-toggle=\"collapse\" data-bs-target=\"#t"+index+"\" aria-controls=\"t"+index+"\" aria-expanded=\"false\" aria-label=\""+value+"\"><h4>"+value+"</h4></button></div><div class=\"row navbar-collapse overflow-auto collapse\" id=\"t"+index+"\"></div></div></div>")
      $.getJSON("data/json/themes/"+value+".json", function(data1) {
        $.each(data1, function(i, v) {
          $("#t"+index).append("<div class=\"col-md-6\"><div class=\"card text-center\"><div class=\"card-header\"><h5 class=\"card-title\">"+v.title+"</h5></div><div class=\"card-body\"><p class=\"card-text\"><div style=\"background-image: url("+v.cover+");\" class=\"rounded mx-auto d-block img-test\"></div></p><a href=\"javascript: goToTest('"+v.title+"','"+value+"')\" class=\"btn btn-primary\">Пройти тест</a></div><div class=\"card-footer text-muted fst-italic\">"+v.questions.length+" Запитань</div></div></div>")
        });
      });
    });
  });
}
function goToTest(name, theme){
  document.cookie = "name="+name;
  document.cookie = "theme="+theme;
  window.location.href = "test.html";
}
function Search() {
    $("#search-content").empty();
    var searchText = $("#search-text").val();
    if(searchText !== "") {
        $.each($(".card").clone(), function (i, v) {
            if($.isSubstring(v.innerHTML,searchText)){
                $("#search-content").append(v);
            }
        });
    }
}
</script>

</body>
</html>